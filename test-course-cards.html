<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Course Test</title>
    <link rel="stylesheet" href="course-styles.css">
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Direct Course Card Test</h1>
    
    <button onclick="testCourseCard()">Create Salsa Fundamentals Card</button>
    <button onclick="testAllCourses()">Create All Course Cards</button>
    <button onclick="testLoggedInState()">Simulate Logged In User</button>
    
    <div id="result" class="test-grid"></div>
    <div id="log" style="background: #f9f9f9; padding: 10px; margin: 20px 0; min-height: 100px; border: 1px solid #ccc;"></div>

    <script src="course-app.js"></script>
    <script>
        function log(message) {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `<div>[${time}] ${message}</div>`;
            console.log(message);
        }
        
        function testCourseCard() {
            log('ğŸ§ª Testing Salsa Fundamentals card creation...');
            
            if (!window.courseApp) {
                log('âŒ Course app not available');
                return;
            }
            
            const course = window.courseApp.courses['salsa-fundamentals'];
            if (!course) {
                log('âŒ Salsa Fundamentals course not found');
                log(`Available courses: ${Object.keys(window.courseApp.courses).join(', ')}`);
                return;
            }
            
            log(`âœ… Found course: ${course.title}`);
            log(`ğŸ“ Course icon: ${course.icon}`);
            
            try {
                const card = window.courseApp.createCourseCard(course);
                document.getElementById('result').innerHTML = '';
                document.getElementById('result').appendChild(card);
                log('âœ… Course card created successfully!');
            } catch (error) {
                log(`âŒ Error creating course card: ${error.message}`);
            }
        }
        
        function testAllCourses() {
            log('ğŸ§ª Testing all course cards...');
            
            if (!window.courseApp) {
                log('âŒ Course app not available');
                return;
            }
            
            const courses = window.courseApp.courses;
            const result = document.getElementById('result');
            result.innerHTML = '';
            
            let count = 0;
            Object.values(courses).forEach(course => {
                try {
                    const card = window.courseApp.createCourseCard(course);
                    result.appendChild(card);
                    count++;
                    log(`âœ… Created card for: ${course.title}`);
                } catch (error) {
                    log(`âŒ Error creating card for ${course.title}: ${error.message}`);
                }
            });
            
            log(`ğŸ“Š Total cards created: ${count}/${Object.keys(courses).length}`);
        }
        
        function testLoggedInState() {
            log('ğŸ§ª Testing logged in user state...');
            
            if (!window.courseApp) {
                log('âŒ Course app not available');
                return;
            }
            
            // Simulate a logged in user
            window.courseApp.currentUser = {
                id: 'test-user',
                name: 'Test User',
                email: 'test@example.com',
                purchasedCourses: []
            };
            
            log('âœ… Set current user to test user');
            log(`ğŸ‘¤ Current user: ${window.courseApp.currentUser.name}`);
            log(`ğŸ”’ Is admin: ${window.courseApp.isAdmin()}`);
            
            testAllCourses();
        }
        
        window.addEventListener('load', function() {
            log('Page loaded');
            
            setTimeout(() => {
                if (window.courseApp) {
                    log('âœ… Course app initialized');
                    log(`ğŸ“š Total courses: ${Object.keys(window.courseApp.courses).length}`);
                    
                    Object.keys(window.courseApp.courses).forEach(id => {
                        const course = window.courseApp.courses[id];
                        log(`ğŸ“ ${id}: ${course.title}`);
                    });
                } else {
                    log('âŒ Course app failed to initialize');
                }
            }, 1000);
        });
    </script>
</body>
</html>
